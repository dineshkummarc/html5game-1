<!DOCTYPE html>
<html>
<head>
    <title>html5 game engine</title>
    <style>
        #functions {
            border: #ffff00;
        }

        #canvas {
            border: #ffff00 1px solid;
            height: 600px;
            width: 800px;
        }

        #codeform {

        }
    </style>
</head>
<body>
<div>
    <canvas id='canvas'>
        This is the canvas
    </canvas>
    <div id='functions'>

    </div>
</div>
<script src='./html5game/base.js' type="text/javascript"></script>
<form id='codeform' name='codeform'>
</form>
<script>
    var g = game('canvas');
    var rnd = function(start){
        return Math.floor(Math.random()*start);
    }
    g.entity({fillStyle:'#ff0000',path: [{x:0,y:0},{x:10,y:10},{x:-10,y:10},{x:0,y:0}]});

    //});
    for (var i = 0; i < 500; i++) {
        var ent = g.entity({fillStyle:'#ff2222',x:300,y:300,w:rnd(10)+5,h:rnd(10)+5,rotation: rnd(360)});
        ent.move_to({x:rnd(500), y:rnd(500), duration: rnd(10)});
        ent.rotate_to({angle: rnd(360), duration: rnd(10)});
    }
   // var ent = g.entity({fillStyle:'#ff2222',x:300,y:300,w:50,h:50,rotation: 0});
   // ent.move_to({x:350,y:100,duration:1});

    document.addEventListener('keydown', kdown);
    document.addEventListener('keyup', kup);

    function kdown(e) {
        document.title = e.keyCode;
        var factor = 1;
        with (g.entities[0]) {
            switch (e.keyCode) {
                case 37:
                    move({x:-factor,y:0});
                    break;
                case 38:
                    move({x:0,y:-factor});
                    break
                case 39:
                    move({x:factor,y:0});
                    break;
                case 40:
                    move({x:0,y:factor});
                    break;
            }
        }

    }
    function kup(e) {
        g.entities[0].direction = null;

    }

</script>

</body>

</html>