<!DOCTYPE html>
<html>
<head>
    <title>html5 game engine</title>
    <style>
        #functions {
            border: #ffff00;
        }

        #canvas {
            border: #ffff00 1px solid;
            height: 600px;
            width: 800px;
        }

        #codeform {

        }
    </style>
</head>
<body>
<div>
    <canvas id='canvas'>
        This is the canvas
    </canvas>
    <div id='functions'>

    </div>
</div>
<script src='./html5game/base.js' type="text/javascript"></script>
<form id='codeform' name='codeform'>
</form>
<script>
    var g = game('canvas');
    var rnd = function(start){
        return Math.floor(Math.random()*start);
    }
    g.entity({fillStyle:'#ff0000',path: [{x:0,y:0},{x:10,y:10},{x:-10,y:10},{x:0,y:0}]

    });
    for (i = 0; i < 100; i++) {
        g.entity({fillStyle:'#ff2222',x:rnd(600),y:rnd(600),w:rnd(10),h:rnd(10),rotation: rnd(2)/10});

    }

    document.addEventListener('keydown', kdown);
    document.addEventListener('keyup', kup);
    /*for (j = 1; j < g.entities.length; j++) {
        g.entities[j].move_to(rnd(500),rnd(500),rnd(100)/10);
    } */

    function kdown(e) {
        document.title = e.keyCode;
        var factor = 2;
        with (g.entities[0]) {
            switch (e.keyCode) {
                case 37:
                    move(-factor,0);
                    break;
                case 38:
                    move(0,-factor);
                    break
                case 39:
                    move(factor,0);
                    break;
                case 40:
                    move(0,factor);
                    break;
            }
        }

    }
    function kup(e) {
        g.entities[0].direction = null;

    }

</script>

</body>

</html>